import React, { useState } from 'react';
import { ChevronRight, Star, Users, Calendar, DollarSign, Briefcase, Music, Mic } from 'lucide-react';

const SpeakerRecommendationEngine = () => {
  const [currentStep, setCurrentStep] = useState(0);
  const [responses, setResponses] = useState({});
  const [showResults, setShowResults] = useState(false);

  // Sample speaker data
  const speakers = [
    {
      id: 1,
      name: "Sarah Johnson",
      type: "Motivational Speaker",
      specialties: ["Leadership", "Innovation", "Change Management"],
      industries: ["Technology", "Healthcare", "Finance"],
      audienceSize: "50-2000",
      priceRange: "$$",
      rating: 4.9,
      image: "🎯",
      bio: "Former Fortune 500 CEO turned motivational speaker specializing in digital transformation.",
      testimonial: "Sarah's insights on leadership transformed our company culture."
    },
    {
      id: 2,
      name: "Marcus Chen",
      type: "Corporate Performer",
      specialties: ["Team Building", "Entertainment", "Corporate Jazz"],
      industries: ["All Industries"],
      audienceSize: "25-500",
      priceRange: "$",
      rating: 4.8,
      image: "🎷",
      bio: "Professional jazz musician who creates unforgettable corporate entertainment experiences.",
      testimonial: "Marcus brought incredible energy to our annual conference."
    },
    {
      id: 3,
      name: "Dr. Rachel Williams",
      type: "Motivational Speaker",
      specialties: ["Resilience", "Mental Health", "Productivity"],
      industries: ["Healthcare", "Education", "Manufacturing"],
      audienceSize: "100-5000",
      priceRange: "$$$",
      rating: 4.9,
      image: "🧠",
      bio: "Neuroscientist and bestselling author on peak performance and mental resilience.",
      testimonial: "Dr. Williams' presentation was both scientifically fascinating and incredibly practical."
    }
  ];

  const questions = [
    {
      id: 'eventType',
      question: 'What type of event are you planning?',
      options: [
        'Annual Conference',
        'Sales Kickoff',
        'Team Building Event',
        'Product Launch',
        'Awards Ceremony',
        'Training Workshop'
      ]
    },
    {
      id: 'audienceSize',
      question: 'How many attendees will you have?',
      options: [
        '25-50 people',
        '50-100 people',
        '100-500 people',
        '500-1000 people',
        '1000+ people'
      ]
    },
    {
      id: 'industry',
      question: 'What industry is your company in?',
      options: [
        'Technology',
        'Healthcare',
        'Finance',
        'Manufacturing',
        'Education',
        'Retail',
        'Other'
      ]
    },
    {
      id: 'goals',
      question: 'What are your main goals for this event?',
      options: [
        'Motivate the team',
        'Educate on new trends',
        'Celebrate achievements',
        'Build team unity',
        'Launch new initiatives',
        'Entertainment & networking'
      ]
    },
    {
      id: 'speakerType',
      question: 'What type of speaker are you looking for?',
      options: [
        'Motivational Speaker',
        'Industry Expert',
        'Corporate Performer/Musician',
        'Celebrity Speaker',
        'Team Building Facilitator'
      ]
    },
    {
      id: 'budget',
      question: 'What\'s your speaker budget range?',
      options: [
        'Under $5,000',
        '$5,000 - $15,000',
        '$15,000 - $30,000',
        '$30,000 - $50,000',
        '$50,000+'
      ]
    }
  ];

  const handleAnswer = (questionId, answer) => {
    setResponses({ ...responses, [questionId]: answer });
    
    if (currentStep < questions.length - 1) {
      setCurrentStep(currentStep + 1);
    } else {
      setShowResults(true);
    }
  };

  const getRecommendations = () => {
    // Simple matching algorithm - in reality this would be much more sophisticated
    return speakers.filter(speaker => {
      if (responses.speakerType && !speaker.type.toLowerCase().includes(responses.speakerType.toLowerCase().split(' ')[0])) {
        return false;
      }
      if (responses.industry && speaker.industries.length > 0 && 
          !speaker.industries.includes(responses.industry) && 
          !speaker.industries.includes('All Industries')) {
        return false;
      }
      return true;
    }).sort((a, b) => b.rating - a.rating);
  };

  const resetEngine = () => {
    setCurrentStep(0);
    setResponses({});
    setShowResults(false);
  };

  if (showResults) {
    const recommendations = getRecommendations();
    
    return (
      <div className="max-w-4xl mx-auto p-6 bg-white">
        <div className="text-center mb-8">
          <h2 className="text-3xl font-bold text-gray-800 mb-2">Your Personalized Speaker Recommendations</h2>
          <p className="text-gray-600">Based on your event requirements, here are our top matches:</p>
        </div>

        <div className="grid gap-6 mb-8">
          {recommendations.map((speaker, index) => (
            <div key={speaker.id} className="border rounded-lg p-6 shadow-lg hover:shadow-xl transition-shadow">
              <div className="flex items-start gap-4">
                <div className="text-4xl">{speaker.image}</div>
                <div className="flex-1">
                  <div className="flex items-center justify-between mb-2">
                    <h3 className="text-xl font-bold text-gray-800">{speaker.name}</h3>
                    <div className="flex items-center gap-1">
                      <Star className="w-4 h-4 fill-yellow-400 text-yellow-400" />
                      <span className="text-sm font-medium">{speaker.rating}</span>
                    </div>
                  </div>
                  
                  <div className="flex items-center gap-4 mb-3 text-sm text-gray-600">
                    <div className="flex items-center gap-1">
                      <Mic className="w-4 h-4" />
                      {speaker.type}
                    </div>
                    <div className="flex items-center gap-1">
                      <Users className="w-4 h-4" />
                      {speaker.audienceSize} attendees
                    </div>
                    <div className="flex items-center gap-1">
                      <DollarSign className="w-4 h-4" />
                      {speaker.priceRange}
                    </div>
                  </div>

                  <p className="text-gray-700 mb-3">{speaker.bio}</p>
                  
                  <div className="mb-3">
                    <span className="text-sm font-medium text-gray-600">Specialties: </span>
                    {speaker.specialties.map((specialty, i) => (
                      <span key={i} className="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full mr-1 mb-1">
                        {specialty}
                      </span>
                    ))}
                  </div>

                  <blockquote className="italic text-gray-600 border-l-4 border-blue-500 pl-4">
                    "{speaker.testimonial}"
                  </blockquote>
                </div>
              </div>
              
              <div className="mt-4 flex gap-3">
                <button className="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                  View Full Profile
                </button>
                <button className="border border-blue-600 text-blue-600 px-6 py-2 rounded-lg hover:bg-blue-50 transition-colors">
                  Request Quote
                </button>
              </div>
            </div>
          ))}
        </div>

        <div className="text-center">
          <button 
            onClick={resetEngine}
            className="bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition-colors"
          >
            Start Over
          </button>
        </div>

        <div className="mt-8 p-6 bg-blue-50 rounded-lg">
          <h3 className="text-lg font-bold text-gray-800 mb-2">Ready to Book Your Perfect Speaker?</h3>
          <p className="text-gray-700 mb-4">Our team is standing by to help you finalize the details and ensure your event is a huge success.</p>
          <button className="bg-blue-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors">
            Contact First Class Talent Now
          </button>
        </div>
      </div>
    );
  }

  const currentQuestion = questions[currentStep];

  return (
    <div className="max-w-2xl mx-auto p-6 bg-white">
      <div className="text-center mb-8">
        <h1 className="text-3xl font-bold text-gray-800 mb-2">Find Your Perfect Speaker</h1>
        <p className="text-gray-600">Answer a few quick questions and we'll recommend speakers tailored to your event</p>
      </div>

      <div className="mb-8">
        <div className="flex justify-between items-center mb-4">
          <span className="text-sm text-gray-500">Question {currentStep + 1} of {questions.length}</span>
          <span className="text-sm text-gray-500">{Math.round(((currentStep + 1) / questions.length) * 100)}% Complete</span>
        </div>
        <div className="w-full bg-gray-200 rounded-full h-2">
          <div 
            className="bg-blue-600 h-2 rounded-full transition-all duration-300"
            style={{ width: `${((currentStep + 1) / questions.length) * 100}%` }}
          ></div>
        </div>
      </div>

      <div className="mb-8">
        <h2 className="text-xl font-bold text-gray-800 mb-6">{currentQuestion.question}</h2>
        <div className="grid gap-3">
          {currentQuestion.options.map((option, index) => (
            <button
              key={index}
              onClick={() => handleAnswer(currentQuestion.id, option)}
              className="flex items-center justify-between p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all duration-200 text-left"
            >
              <span className="font-medium text-gray-700">{option}</span>
              <ChevronRight className="w-5 h-5 text-gray-400" />
            </button>
          ))}
        </div>
      </div>

      {currentStep > 0 && (
        <button
          onClick={() => setCurrentStep(currentStep - 1)}
          className="text-blue-600 hover:text-blue-700 font-medium"
        >
          ← Previous Question
        </button>
      )}
    </div>
  );
};

export default SpeakerRecommendationEngine;
